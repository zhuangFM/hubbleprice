package com.netease.yx.dp.udf;

import com.google.gson.*;
import com.netease.yx.dp.model.Coupon;
import com.netease.yx.dp.resolver.CouponResolver;
import com.netease.yx.dp.resolver.PriceResolver;
import org.apache.hadoop.hive.ql.exec.UDF;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.*;

public class OutsidePriceComputeUDF extends UDF {
    private static final Logger logger = LoggerFactory.getLogger(OutsidePriceComputeUDF.class);

    public String evaluate(String htmlStr, String source) {
        JsonParser jsonParser = new JsonParser();
        JsonObject obj = (JsonObject) jsonParser.parse(htmlStr);
        Map<String, Object> resultMap = new HashMap<>();
        resultMap.put("processStatus",1); //1表示解析成功

        String content = obj.get("tb-property").getAsString();

        //价格获取

        List<Double> priceArr = new PriceResolver().resolve(content, source);
        List<Double> resultPrices = new ArrayList(priceArr);
        resultMap.put("priceList", priceArr);


        try {
            //满减规则

            List<Coupon> coupons = new CouponResolver().resolve(content, source);
            resultMap.put("couponList", coupons);

            //计算结果

            for (double price : priceArr) {
                for (Coupon cop : coupons) {
                    logger.info("价格 {} 使用优惠券 {} 之后价格为 {}", price, cop, cop.getResultMoney(price));
                    resultPrices.add(cop.getResultMoney(price));
                }
            }
        } catch (Exception e) {
            resultMap.put("processStatus",0); //0表示解析失败
            resultMap.put("errorMsg","优惠券解析出错");
            logger.error("error {}", e.getStackTrace());
        }


        Collections.sort(resultPrices);

        try{
            resultMap.put("minPrice", resultPrices.get(0));
            logger.info("最低价为:{}", resultPrices.get(0));
        }catch (Exception e){
            resultMap.put("processStatus",0); //0表示解析失败
            resultMap.put("errorMsg","价格list为空");
            logger.error("error {}",e.getStackTrace());
        }

        Gson gson = new Gson();

        return gson.toJson(resultMap);
    }

    public static void main(String[] args) {
//        String content = "{\"tb-property\":\"\\n                <div class=\\\"sku-name\\\">\\n                                        <img src=\\\"//img10.360buyimg.com/img/jfs/t8485/356/1281159143/15432/343a6ec9/59b73dbaN9c878bcc.png\\\" alt=\\\"京东超市\\\">\\n                                                            拉面说 日式拉面非油炸速食非油炸方便面四味组合装（原味+辣味+冬阴功味+番茄味） 910g                </div>\\n                        <div class=\\\"news\\\">\\n            <div class=\\\"item hide\\\" id=\\\"p-ad\\\" clstag=\\\"shangpin|keycount|product|slogana\\\" data-hook=\\\"hide\\\" title=\\\"京东超市爱心助茶农，部分春茶商品低至2件5折！（具体信息以商详为准）同心战疫，京助茶农\\\" style=\\\"display: block;\\\">京东超市爱心助茶农，部分春茶商品低至2件5折！（具体信息以商详为准）<a href=\\\"https://pro.m.jd.com/mall/active/2aEG7QBhmKQugqx7KHobmhtzyWmC/index.html\\\" target=\\\"_blank\\\">同心战疫，京助茶农</a></div>\\n            <div class=\\\"item hide\\\" id=\\\"p-ad-phone\\\" clstag=\\\"shangpin|keycount|product|sloganb\\\" data-hook=\\\"hide\\\"></div>\\n        </div>\\n\\n                                <div class=\\\"summary summary-first\\\">\\n            <div class=\\\"summary-price-wrap\\\">\\n                                    <div class=\\\"summary-price J-summary-price\\\">\\n                                                <div class=\\\"dt\\\">京 东 价</div>\\n                        <div class=\\\"dd\\\">\\n                            <span class=\\\"p-price\\\"><span>￥</span><span class=\\\"price J-p-100001928795\\\">74.90</span></span>\\n                                                                                                                                                                                                                                                        <a class=\\\"notice J-notify-sale\\\" data-type=\\\"1\\\" data-sku=\\\"100001928795\\\" href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|jiangjia_2\\\">降价通知</a>\\n                                                                                    <div class=\\\"fans-price J-fans-price hide\\\" style=\\\"display: none;\\\">\\n                                <span class=\\\"p-price-fans\\\">\\n                                    <span class=\\\"price J-p-f-100001928795\\\"></span>\\n                                </span>\\n                                <img src=\\\"//img30.360buyimg.com/devfe/jfs/t17683/96/2616723497/1348/5d49daba/5afe6d90Nc2d9965a.png\\\" alt=\\\"fans\\\" class=\\\"fans-icon\\\">\\n                                <span class=\\\"text\\\">关注店铺，即享粉丝价</span>\\n                            </div>\\n                            \\n                                                        <!-- 高端品 限时特惠start，这段代码中的样式，是需要改的，请前端同学定义样式。还有用js代码，完成对应的需求 -->\\n                            <span class=\\\"J-xsth-sale\\\" style=\\\"display: none;\\\">\\n                                    <a href=\\\"#none\\\" class=\\\"J-xsth-panel\\\" clstag=\\\"shangpin|keycount|product|xianshitehui\\\">限时特惠<s class=\\\"s-arrow\\\">&gt;</s></a>\\n                                    <i class=\\\"sprite-question\\\"></i>\\n                                </span>\\n                            <!-- 高端品 限时特惠end -->\\n\\n                                                                                    \\n                                                                                                                                            <div class=\\\"plus-price J-plus-price hide\\\" style=\\\"display: none;\\\">\\n                                    <span class=\\\"p-price-plus\\\">\\n                                        <span class=\\\"price J-p-p-100001928795\\\"></span>\\n                                    </span>\\n                                <a class=\\\"plus-icon-linkwrap\\\" clstag=\\\"shangpin|keycount|product|plusicon\\\" href=\\\"//plus.jd.com/index\\\" target=\\\"_blank\\\"><img src=\\\"//img10.360buyimg.com/da/jfs/t5731/317/890792506/848/391b9a15/59224a28N48552ed2.png\\\" alt=\\\"plus\\\" class=\\\"plus-icon\\\"></a>\\n                                <span class=\\\"text\\\"><strong>PLUS会员</strong>专享价</span>\\n                                <a clstag=\\\"shangpin|keycount|product|whatisplus\\\" href=\\\"//plus.jd.com/index\\\" target=\\\"_blank\\\">现在开通PLUS会员享限时特惠 &gt;&gt;</a>\\n                            </div>\\n                                                                                    <div class=\\\"user-price J-user-price hide\\\" style=\\\"display: none;\\\">\\n                                    <span class=\\\"p-price-user\\\">\\n                                        <span class=\\\"price J-p-s-100001928795\\\"></span>\\n                                    </span>\\n                                <img src=\\\"//img14.360buyimg.com/devfe/jfs/t5728/113/4603623007/244/a159e46d/59535259N6eed475d.png\\\" alt=\\\"sam's\\\" class=\\\"sam-icon\\\">\\n\\n                                <span class=\\\"text\\\">您购买此商品可享受专属价</span>\\n\\n                                <i class=\\\"sprite-question\\\"></i>\\n                            </div>\\n                                                    </div>\\n                    </div>\\n\\n                    <!-- 分期用分区价格展示需求 start -->\\n                                        <!-- 分期用分区价格展示需求 end -->\\n\\n                                        <div class=\\\"summary-info J-summary-info clearfix\\\">\\n                        <div id=\\\"comment-count\\\" class=\\\"comment-count item fl\\\" clstag=\\\"shangpin|keycount|product|pingjiabtn_2\\\">\\n                            <p class=\\\"comment\\\">累计评价</p>\\n                            <a class=\\\"count J-comm-100001928795\\\" href=\\\"#none\\\">6.4万+</a>\\n                        </div>\\n                                                                    </div>\\n                                                                                                                        <div id=\\\"summary-quan\\\" class=\\\"li p-choose hide\\\" clstag=\\\"shangpin|keycount|product|lingquan\\\"></div>\\n                                        <div id=\\\"J-summary-top\\\" class=\\\"summary-top\\\" clstag=\\\"shangpin|keycount|product|cuxiao\\\">\\n                        <div id=\\\"summary-promotion\\\" class=\\\"summary-promotion\\\" data-hook=\\\"hide\\\">\\n                            <div class=\\\"dt\\\">促　　销</div>\\n                            <div class=\\\"dd J-prom-wrap p-promotions-wrap\\\">\\n                                <div class=\\\"p-promotions\\\">\\n                                    <ins id=\\\"prom-mbuy\\\" data-url=\\\"https://cd.jd.com/qrcode?skuId=100001928795&amp;location=3&amp;isWeChatStock=2\\\"></ins>\\n                                    <ins id=\\\"prom-car-gift\\\"></ins>\\n                                    <ins id=\\\"prom-gift\\\" clstag=\\\"shangpin|keycount|product|zengpin_1\\\" style=\\\"display: none;\\\"></ins>\\n                                    <ins id=\\\"prom-fujian\\\" clstag=\\\"shangpin|keycount|product|fujian_1\\\"></ins>\\n                                    <ins id=\\\"prom\\\"></ins>\\n                                    <ins id=\\\"prom-one\\\"></ins>\\n                                    <ins id=\\\"prom-phone\\\"></ins>\\n                                    <ins id=\\\"prom-phone-jjg\\\"></ins>\\n                                    <ins id=\\\"prom-tips\\\"></ins>\\n                                    <ins id=\\\"prom-quan\\\"><div class=\\\"J-prom-quan prom-quan\\\"><em class=\\\"hl_red_bg\\\">满额返券</em><em class=\\\"hl_red\\\">购买食品部分品类满1元即返茶叶糖巧169减30优惠券</em>&nbsp;<a href=\\\"//a.jd.com/mfdetail.html?mfid=21584\\\" target=\\\"_blank\\\">详情 <s class=\\\"s-arrow\\\">&gt;&gt;</s></a></div></ins>\\n                                    <div class=\\\"J-prom-more view-all-promotions\\\" data-hook=\\\"hide\\\" style=\\\"visibility: hidden;\\\">\\n                                        <span class=\\\"prom-sum\\\">展开促销</span>\\n                                        <a href=\\\"#none\\\" class=\\\"view-link\\\"><i class=\\\"sprite-arr-close\\\"></i></a>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n\\n                        <div class=\\\"summary p-choose-wrap\\\">\\n             \\n                                <div id=\\\"summary-support\\\" class=\\\"li hide\\\" style=\\\"display: none;\\\">\\n                    <div class=\\\"dt\\\">增值业务</div>\\n                    <div class=\\\"dd\\\">\\n                        <ul class=\\\"choose-support lh\\\">\\n                        </ul>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"summary-stock\\\" clstag=\\\"shangpin|keycount|product|quyuxuanze_2\\\">\\n                    <div class=\\\"dt\\\">配 送 至</div>\\n                    <div class=\\\"dd\\\">\\n                        <div class=\\\"store clearfix\\\">\\n                            <div class=\\\"stock-address\\\">\\n                                <div id=\\\"area1\\\" class=\\\"ui-area-wrap ui-area-oversea-mode\\\">            <div class=\\\"ui-area-text-wrap\\\"><!--展示内容主体-->                <div class=\\\"ui-area-text\\\" data-id=\\\"15-1213-1214-50124\\\" title=\\\"浙江杭州市余杭区百丈镇\\\">浙江杭州市余杭区百丈镇</div><!--显示被选中的地区-->                <b></b><!--小箭头-->            </div>            <div class=\\\"ui-area-content-wrap ui-area-w-max\\\"><!--弹出内容主体-->                <div class=\\\"ui-area-tab\\\"><a class=\\\"ui-switchable-item\\\" data-id=\\\"15\\\" title=\\\"浙江\\\"><em>浙江</em><i></i></a><a class=\\\"ui-switchable-item\\\" data-id=\\\"1213\\\" title=\\\"杭州市\\\"><em>杭州市</em><i></i></a><a class=\\\"ui-switchable-item\\\" data-id=\\\"1214\\\" title=\\\"余杭区\\\"><em>余杭区</em><i></i></a><a class=\\\"ui-switchable-item ui-area-current\\\" data-id=\\\"50124\\\" title=\\\"百丈镇\\\"><em>百丈镇</em><i></i></a></div><!--省市区选择标签-->                <div class=\\\"ui-area-content\\\"><div style=\\\"display: none;\\\" class=\\\"ui-switchable-panel\\\" data-index=\\\"0\\\"><ul class=\\\"ui-area-content-list\\\"><li><a data-id=\\\"1\\\" href=\\\"javascript:void(0)\\\">北京</a></li><li><a data-id=\\\"2\\\" href=\\\"javascript:void(0)\\\">上海</a></li><li><a data-id=\\\"3\\\" href=\\\"javascript:void(0)\\\">天津</a></li><li><a data-id=\\\"4\\\" href=\\\"javascript:void(0)\\\">重庆</a></li><li><a data-id=\\\"5\\\" href=\\\"javascript:void(0)\\\">河北</a></li><li><a data-id=\\\"6\\\" href=\\\"javascript:void(0)\\\">山西</a></li><li><a data-id=\\\"7\\\" href=\\\"javascript:void(0)\\\">河南</a></li><li><a data-id=\\\"8\\\" href=\\\"javascript:void(0)\\\">辽宁</a></li><li><a data-id=\\\"9\\\" href=\\\"javascript:void(0)\\\">吉林</a></li><li><a data-id=\\\"10\\\" href=\\\"javascript:void(0)\\\">黑龙江</a></li><li><a data-id=\\\"11\\\" href=\\\"javascript:void(0)\\\">内蒙古</a></li><li><a data-id=\\\"12\\\" href=\\\"javascript:void(0)\\\">江苏</a></li><li><a data-id=\\\"13\\\" href=\\\"javascript:void(0)\\\">山东</a></li><li><a data-id=\\\"14\\\" href=\\\"javascript:void(0)\\\">安徽</a></li><li class=\\\"ui-area-current\\\"><a data-id=\\\"15\\\" href=\\\"javascript:void(0)\\\">浙江</a></li><li><a data-id=\\\"16\\\" href=\\\"javascript:void(0)\\\">福建</a></li><li><a data-id=\\\"17\\\" href=\\\"javascript:void(0)\\\">湖北</a></li><li><a data-id=\\\"18\\\" href=\\\"javascript:void(0)\\\">湖南</a></li><li><a data-id=\\\"19\\\" href=\\\"javascript:void(0)\\\">广东</a></li><li><a data-id=\\\"20\\\" href=\\\"javascript:void(0)\\\">广西</a></li><li><a data-id=\\\"21\\\" href=\\\"javascript:void(0)\\\">江西</a></li><li><a data-id=\\\"22\\\" href=\\\"javascript:void(0)\\\">四川</a></li><li><a data-id=\\\"23\\\" href=\\\"javascript:void(0)\\\">海南</a></li><li><a data-id=\\\"24\\\" href=\\\"javascript:void(0)\\\">贵州</a></li><li><a data-id=\\\"25\\\" href=\\\"javascript:void(0)\\\">云南</a></li><li><a data-id=\\\"26\\\" href=\\\"javascript:void(0)\\\">西藏</a></li><li><a data-id=\\\"27\\\" href=\\\"javascript:void(0)\\\">陕西</a></li><li><a data-id=\\\"28\\\" href=\\\"javascript:void(0)\\\">甘肃</a></li><li><a data-id=\\\"29\\\" href=\\\"javascript:void(0)\\\">青海</a></li><li><a data-id=\\\"30\\\" href=\\\"javascript:void(0)\\\">宁夏</a></li><li><a data-id=\\\"31\\\" href=\\\"javascript:void(0)\\\">新疆</a></li><li><a data-id=\\\"52993\\\" href=\\\"javascript:void(0)\\\">港澳</a></li><li><a data-id=\\\"32\\\" href=\\\"javascript:void(0)\\\">台湾</a></li><li><a data-id=\\\"84\\\" href=\\\"javascript:void(0)\\\">钓鱼岛</a></li><li><a data-id=\\\"53283\\\" href=\\\"javascript:void(0)\\\">海外</a></li></ul></div><div style=\\\"display: none;\\\" class=\\\"ui-switchable-panel\\\" data-index=\\\"1\\\"><ul class=\\\"ui-area-content-list\\\"><li><a data-id=\\\"1158\\\" href=\\\"javascript:void(0)\\\">宁波市</a></li><li><a data-id=\\\"1273\\\" href=\\\"javascript:void(0)\\\">衢州市</a></li><li><a data-id=\\\"1280\\\" href=\\\"javascript:void(0)\\\">丽水市</a></li><li><a data-id=\\\"1290\\\" href=\\\"javascript:void(0)\\\">台州市</a></li><li><a data-id=\\\"1298\\\" href=\\\"javascript:void(0)\\\">舟山市</a></li><li class=\\\"ui-area-current\\\"><a data-id=\\\"1213\\\" href=\\\"javascript:void(0)\\\">杭州市</a></li><li><a data-id=\\\"1233\\\" href=\\\"javascript:void(0)\\\">温州市</a></li><li><a data-id=\\\"1243\\\" href=\\\"javascript:void(0)\\\">嘉兴市</a></li><li><a data-id=\\\"1250\\\" href=\\\"javascript:void(0)\\\">湖州市</a></li><li><a data-id=\\\"1255\\\" href=\\\"javascript:void(0)\\\">绍兴市</a></li><li><a data-id=\\\"1262\\\" href=\\\"javascript:void(0)\\\">金华市</a></li></ul></div><div style=\\\"display: none;\\\" class=\\\"ui-switchable-panel\\\" data-index=\\\"2\\\"><ul class=\\\"ui-area-content-list\\\"><li class=\\\"ui-area-current\\\"><a data-id=\\\"1214\\\" href=\\\"javascript:void(0)\\\">余杭区</a></li><li><a data-id=\\\"1215\\\" href=\\\"javascript:void(0)\\\">萧山区</a></li><li><a data-id=\\\"1217\\\" href=\\\"javascript:void(0)\\\">富阳区</a></li><li><a data-id=\\\"1218\\\" href=\\\"javascript:void(0)\\\">桐庐县</a></li><li><a data-id=\\\"1219\\\" href=\\\"javascript:void(0)\\\">建德市</a></li><li><a data-id=\\\"1220\\\" href=\\\"javascript:void(0)\\\">淳安县</a></li><li><a data-id=\\\"2963\\\" href=\\\"javascript:void(0)\\\">江干区</a></li><li><a data-id=\\\"3038\\\" href=\\\"javascript:void(0)\\\">滨江区</a></li><li><a data-id=\\\"3408\\\" href=\\\"javascript:void(0)\\\">上城区</a></li><li><a data-id=\\\"3409\\\" href=\\\"javascript:void(0)\\\">下城区</a></li><li><a data-id=\\\"3410\\\" href=\\\"javascript:void(0)\\\">拱墅区</a></li><li><a data-id=\\\"3411\\\" href=\\\"javascript:void(0)\\\">西湖区</a></li><li><a data-id=\\\"4285\\\" href=\\\"javascript:void(0)\\\">下沙区</a></li><li><a data-id=\\\"49711\\\" href=\\\"javascript:void(0)\\\">临安区</a></li></ul></div><div style=\\\"\\\" class=\\\"ui-switchable-panel ui-switchable-panel-selected\\\" data-index=\\\"3\\\"><ul class=\\\"ui-area-content-list\\\"><li class=\\\"ui-area-current\\\"><a data-id=\\\"50124\\\" href=\\\"javascript:void(0)\\\">百丈镇</a></li><li><a data-id=\\\"50126\\\" href=\\\"javascript:void(0)\\\">长乐镇</a></li><li><a data-id=\\\"50129\\\" href=\\\"javascript:void(0)\\\">黄湖镇</a></li><li><a data-id=\\\"50130\\\" href=\\\"javascript:void(0)\\\">径山镇</a></li><li><a data-id=\\\"50133\\\" href=\\\"javascript:void(0)\\\">鸬鸟镇</a></li><li><a data-id=\\\"50135\\\" href=\\\"javascript:void(0)\\\">瓶窑镇</a></li><li><a data-id=\\\"50138\\\" href=\\\"javascript:void(0)\\\">塘栖镇</a></li><li><a data-id=\\\"50142\\\" href=\\\"javascript:void(0)\\\">余杭街道</a></li><li><a data-id=\\\"52670\\\" href=\\\"javascript:void(0)\\\">仓前街道</a></li><li><a data-id=\\\"52671\\\" href=\\\"javascript:void(0)\\\">崇贤街道</a></li><li><a data-id=\\\"52672\\\" href=\\\"javascript:void(0)\\\">良渚街道</a></li><li><a data-id=\\\"52673\\\" href=\\\"javascript:void(0)\\\">仁和街道</a></li><li><a data-id=\\\"52674\\\" href=\\\"javascript:void(0)\\\">五常街道</a></li><li><a data-id=\\\"52675\\\" href=\\\"javascript:void(0)\\\">闲林街道</a></li><li><a data-id=\\\"52676\\\" href=\\\"javascript:void(0)\\\">运河街道</a></li><li><a data-id=\\\"52677\\\" href=\\\"javascript:void(0)\\\">中泰街道</a></li><li><a data-id=\\\"52678\\\" href=\\\"javascript:void(0)\\\">城区</a></li><li><a data-id=\\\"59052\\\" href=\\\"javascript:void(0)\\\">乔司街道</a></li><li><a data-id=\\\"59290\\\" href=\\\"javascript:void(0)\\\">临平街道</a></li><li><a data-id=\\\"59291\\\" href=\\\"javascript:void(0)\\\">东湖街道</a></li><li><a data-id=\\\"59292\\\" href=\\\"javascript:void(0)\\\">星桥街道</a></li><li><a data-id=\\\"59293\\\" href=\\\"javascript:void(0)\\\">南苑街道</a></li></ul></div></div><!--地区内容-->            </div>        </div>\\n                            </div>\\n                            <div id=\\\"store-prompt\\\" class=\\\"store-prompt\\\"><strong>无货</strong>，此商品暂时售完</div>\\n                            <div class=\\\"J-promise-icon promise-icon fl promise-icon-more\\\" clstag=\\\"shangpin|keycount|product|promisefw_2\\\" style=\\\"display: none;\\\"></div>\\n                            <div class=\\\"J-dcashDesc dcashDesc fl\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n                                                <div id=\\\"summary-supply\\\" class=\\\"li\\\" style=\\\"\\\">\\n                    <div class=\\\"dt\\\">　　</div>\\n                    <div class=\\\"dd\\\">\\n                        <div id=\\\"summary-service\\\" class=\\\"summary-service\\\" clstag=\\\"shangpin|keycount|product|fuwu_2\\\">由 <span class=\\\"hl_red\\\">京东</span> 发货, 并提供售后服务. </div>\\n                    </div>\\n                </div>\\n                                                <div id=\\\"summary-weight\\\" class=\\\"li\\\" style=\\\"display:none\\\">\\n                    <div class=\\\"dt\\\">重　　量</div>\\n                    <div class=\\\"dd\\\"></div>\\n                </div>\\n                                                                <div class=\\\"SelfAssuredPurchase li\\\" id=\\\"J_SelfAssuredPurchase\\\" style=\\\"display:none;\\\"></div>\\n                                <div class=\\\"summary-line\\\"></div>\\n             \\n                                                                                                   <div id=\\\"choose-attrs\\\">\\n                                                                                <div id=\\\"choose-attr-1\\\" class=\\\"li p-choose\\\" data-type=\\\"类别\\\" data-idx=\\\"0\\\">\\n                        <div class=\\\"dt \\\">选择类别                                                </div>\\n                        <div class=\\\"dd\\\">\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100003554683\\\" data-value=\\\"经典爆款三味组合装\\\" title=\\\"「经典爆款三味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典爆款三味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img13.360buyimg.com/n9/s40x40_jfs/t1/43308/34/5285/436105/5ced0a42E50fb8844/6e6cc28df8214e80.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典爆款三味组合装\\\"><i>经典爆款三味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item  selected\\\" data-sku=\\\"100001928795\\\" data-value=\\\"经典爆款四味组合装\\\" title=\\\"经典爆款四味组合装\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典爆款四味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img10.360buyimg.com/n9/s40x40_jfs/t10594/249/2949228635/596064/6f0c8214/5cde5b74N9036df59.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典爆款四味组合装\\\"><i>经典爆款四味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100005922572\\\" data-value=\\\"经典爆款六味组合装\\\" title=\\\"「经典爆款六味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典爆款六味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img12.360buyimg.com/n9/s40x40_jfs/t1/75584/40/531/501935/5ceb8a13Ee22e528b/150e5aa517eb747a.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典爆款六味组合装\\\"><i>经典爆款六味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100004028933\\\" data-value=\\\"经典美味三味组合装\\\" title=\\\"「经典美味三味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典美味三味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img13.360buyimg.com/n9/s40x40_jfs/t1/48312/1/5269/343381/5d30135dEdedff75a/312a2241a01848b6.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典美味三味组合装\\\"><i>经典美味三味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100004026453\\\" data-value=\\\"经典星选三味组合装\\\" title=\\\"「经典星选三味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典星选三味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img13.360buyimg.com/n9/s40x40_jfs/t1/47046/23/5296/330177/5d301446E4fbbdbbf/a8ea9f11174d5bf4.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典星选三味组合装\\\"><i>经典星选三味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100006865152\\\" data-value=\\\"经典尝鲜三味组合装\\\" title=\\\"「经典尝鲜三味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典尝鲜三味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img12.360buyimg.com/n9/s40x40_jfs/t1/45343/13/5284/311972/5d3013c8Ece098e20/9c431d1f09d79d97.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典尝鲜三味组合装\\\"><i>经典尝鲜三味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100009176644\\\" data-value=\\\"经典臻选四味组合装\\\" title=\\\"「经典臻选四味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典臻选四味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img14.360buyimg.com/n9/s40x40_jfs/t1/71036/16/12803/298798/5da1537dE21fbae7b/c8f7d0b555162d42.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典臻选四味组合装\\\"><i>经典臻选四味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                        <div class=\\\"item no-stock\\\" data-sku=\\\"100009176642\\\" data-value=\\\"经典臻选六味组合装\\\" title=\\\"「经典臻选六味组合装」 无货\\\">\\n                                <b></b>\\n                                                                <a href=\\\"#none\\\" clstag=\\\"shangpin|keycount|product|yanse-经典臻选六味组合装\\\">\\n                                                                                                            <img data-img=\\\"1\\\" src=\\\"//img12.360buyimg.com/n9/s40x40_jfs/t1/67793/15/12849/262010/5da1583bE429bd2a8/8fabbed5a3783cc9.jpg\\\" width=\\\"40\\\" height=\\\"40\\\" alt=\\\"经典臻选六味组合装\\\"><i>经典臻选六味组合装</i>\\n                                                                                                        </a>\\n                                                            </div>\\n                                                                                </div>\\n                    </div>\\n                                                                                <div id=\\\"choose-results\\\" class=\\\"li\\\" style=\\\"display:none\\\"><div class=\\\"dt\\\">已选择</div><div class=\\\"dd\\\"></div></div>\\n                                    </div>\\n\\n                                                \\n                                                                                                <div id=\\\"choose-luodipei\\\" class=\\\"choose-luodipei li\\\" style=\\\"display:none\\\">\\n                    <div class=\\\"dt\\\">送装服务</div>\\n                    <div class=\\\"dd\\\"></div>\\n                </div>\\n                                                                <div id=\\\"choose-suits\\\" class=\\\"li choose-suits\\\" style=\\\"display:none\\\">\\n                    <div class=\\\"dt\\\">套　　装</div>\\n                    <div class=\\\"dd clearfix\\\"></div>\\n                </div>\\n                                <div id=\\\"choose-gift\\\" class=\\\"choose-gift li\\\" style=\\\"display: none;\\\">\\n                    <div class=\\\"dt\\\">搭配赠品</div>\\n                    <div class=\\\"dd clearfix\\\">\\n                        <div class=\\\"gift J-gift\\\" clstag=\\\"shangpin|keycount|product|dapeizengpin\\\">\\n                            <i class=\\\"sprite-gift J-popup\\\"></i><span class=\\\"gift-tips\\\">选择搭配赠品(共<em>0</em>个)</span>\\n                        </div>\\n                        <!--choosed-->\\n                        <div class=\\\"J-gift-selected hide\\\">\\n                            <div class=\\\"gift choosed J-gift-choosed\\\"></div>\\n                            <a href=\\\"#none\\\" class=\\\"gift-modify J-popup\\\" clstag=\\\"shangpin|keycount|product|zengpin-genggai\\\">更改</a>\\n                        </div>\\n                    </div>\\n                </div>\\n                                                                                <div id=\\\"choose-service\\\" class=\\\"li\\\" data-hook=\\\"hide\\\" style=\\\"display:none;\\\">\\n                    <div class=\\\"dt\\\" data-yb=\\\"new_yb_server\\\"></div>\\n                    <div class=\\\"dd\\\"></div>\\n                </div>\\n                                                                <div id=\\\"choose-service+\\\" class=\\\"li\\\" style=\\\"display:none;\\\">\\n                    <div class=\\\"dt\\\">京东服务</div>\\n                    <div class=\\\"dd\\\"></div>\\n                </div>\\n                                                                                <div id=\\\"choose-baitiao\\\" class=\\\"li choose-baitiao\\\" style=\\\"display:none\\\">    <div class=\\\"dt\\\">白条分期</div>    <div class=\\\"dd\\\">        <div class=\\\"baitiao-list J-baitiao-list\\\">            <div class=\\\"item\\\" clstag=\\\"shangpin|keycount|product|baitiaofenqi_1_1320_1584_2679\\\" data-snum=\\\"1\\\">                <b></b>                <a href=\\\"#none\\\">                    <strong>                         不分期                    </strong>                    <span style=\\\"display:none;\\\"> 0服务费                    </span>                </a>                <div class=\\\"baitiao-tips hide\\\">                    <ul>                        <li>                            无服务费                        </li>                    </ul>                </div>            </div>            <div class=\\\"item\\\" clstag=\\\"shangpin|keycount|product|baitiaofenqi_3_1320_1584_2679\\\" data-snum=\\\"3\\\">                <b></b>                <a href=\\\"#none\\\">                    <strong>                        ￥25.33起×3期                    </strong>                    <span style=\\\"display:none;\\\"> 含服务费                    </span>                </a>                <div class=\\\"baitiao-tips hide\\\">                    <ul>                        <li>                            含服务费：费率0.5%起，￥0.37起×3期                        </li>                    </ul>                </div>            </div>            <div class=\\\"item\\\" clstag=\\\"shangpin|keycount|product|baitiaofenqi_6_1320_1584_2679\\\" data-snum=\\\"6\\\">                <b></b>                <a href=\\\"#none\\\">                    <strong>                        ￥12.87起×6期                    </strong>                    <span style=\\\"display:none;\\\"> 含服务费                    </span>                </a>                <div class=\\\"baitiao-tips hide\\\">                    <ul>                        <li>                            含服务费：费率0.5%起，￥0.37起×6期                        </li>                    </ul>                </div>            </div>            <div class=\\\"item\\\" clstag=\\\"shangpin|keycount|product|baitiaofenqi_12_1320_1584_2679\\\" data-snum=\\\"12\\\">                <b></b>                <a href=\\\"#none\\\">                    <strong>                        ￥6.63起×12期                    </strong>                    <span style=\\\"display:none;\\\"> 含服务费                    </span>                </a>                <div class=\\\"baitiao-tips hide\\\">                    <ul>                        <li>                            含服务费：费率0.5%起，￥0.37起×12期                        </li>                    </ul>                </div>            </div>            <div class=\\\"item\\\" clstag=\\\"shangpin|keycount|product|baitiaofenqi_24_1320_1584_2679\\\" data-snum=\\\"24\\\">                <b></b>                <a href=\\\"#none\\\">                    <strong>                        ￥3.51起×24期                    </strong>                    <span style=\\\"display:none;\\\"> 含服务费                    </span>                </a>                <div class=\\\"baitiao-tips hide\\\">                    <ul>                        <li>                            含服务费：费率0.5%起，￥0.37起×24期                        </li>                    </ul>                </div>            </div>             <div class=\\\"bt-info-tips\\\">                <a class=\\\"J-bt-tips question icon fl\\\" href=\\\"#none\\\">　</a>            </div>        </div>        <div class=\\\"baitiao-text-wrap\\\"><div class=\\\"baitiao-text J-baitiao-text\\\"></div></div>    </div></div>\\n                                <div id=\\\"choose-jincai\\\" class=\\\"li choose-jincai\\\" style=\\\"display:none\\\">\\n                    <div class=\\\"dt\\\">企业金采</div>\\n                    <div class=\\\"dd\\\">\\n                        <div class=\\\"jincai-list J-jincai-list\\\">\\n                            <div class=\\\"item\\\">\\n                                <a href=\\\"#none\\\">先采购，后付款</a>\\n                            </div>\\n                            <div class=\\\"bt-info-tips\\\">\\n                                <a class=\\\"J-bt-tips question icon fl\\\" href=\\\"#none\\\">　</a>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n                                                                                                              <div class=\\\"summary-line\\\"></div>\\n                                <div id=\\\"choose-btns\\\" class=\\\"choose-btns clearfix\\\">\\n                                    <div class=\\\"choose-amount \\\" clstag=\\\"shangpin|keycount|product|goumaishuliang_2\\\">\\n                        <div class=\\\"wrap-input\\\">\\n                            <input class=\\\"text buy-num\\\" onkeyup=\\\"setAmount.modify('#buy-num');\\\" id=\\\"buy-num\\\" value=\\\"1\\\" data-max=\\\"200\\\">\\n                            <a class=\\\"btn-reduce disabled\\\" onclick=\\\"setAmount.reduce('#buy-num')\\\" href=\\\"#none\\\" data-disabled=\\\"1\\\">-</a>\\n                            <a class=\\\"btn-add\\\" onclick=\\\"setAmount.add('#buy-num')\\\" href=\\\"#none\\\" data-disabled=\\\"1\\\">+</a>\\n                        </div>\\n                    </div>\\n                <!--<a id=\\\"choose-btn-gift\\\" class=\\\"btn-special1 btn-lg\\\" style=\\\"display:none;\\\" href=\\\"//cart.gift.jd.com/cart/addGiftToCart.action?pid=100001928795&pcount=1&ptype=1\\\" class=\\\"btn-gift\\\" clstag=\\\"shangpin|keycount|product|选作礼物购买_2\\\"><b></b>选作礼物购买</a>-->\\n                                                                                                                                                    <a href=\\\"#none\\\" id=\\\"InitCartUrl\\\" class=\\\"btn-special1 btn-lg  btn-disable\\\" onclick=\\\"log(&quot;product&quot;, &quot;加入购物车_2&quot;, &quot;100001928795&quot;)\\\">加入购物车</a>\\n                                                <a id=\\\"btn-baitiao\\\" class=\\\"btn-special2 btn-lg\\\" style=\\\"display:none;\\\" onclick=\\\"log(&quot;product&quot;, &quot;dabaitiaobutton_1320_1584_2679&quot;, &quot;100001928795&quot;)\\\">打白条</a>\\n                <a href=\\\"//jc.jd.com\\\" target=\\\"_blank\\\" id=\\\"btn-jincai\\\" class=\\\"btn-special2 btn-lg\\\" style=\\\"display: none;\\\" clstag=\\\"shangpin|keycount|product|jincai_2\\\">使用金采</a>\\n                                                                <!-- <a href=\\\"#none\\\" id=\\\"btn-onkeybuy\\\" class=\\\"btn-special2 btn-lg\\\" style=\\\"display:none;\\\" onclick='log(\\\"product\\\", \\\"easybuy_2\\\", \\\"100001928795\\\")'>一键购</a> -->\\n                                                                                    <a href=\\\"#none\\\" id=\\\"btn-notify\\\" class=\\\"J-notify-stock btn-special3 btn-lg notify-stock\\\" style=\\\"\\\" data-type=\\\"2\\\" data-sku=\\\"100001928795\\\" clstag=\\\"shangpin|keycount|product|daohuo_1\\\">到货通知</a>\\n                                                                                                            </div>\\n                        <div id=\\\"local-tips\\\" class=\\\"summary-tips hide\\\" style=\\\"display: none;\\\">\\n                <div class=\\\"dt\\\">本地活动</div>\\n                <div class=\\\"dd\\\">\\n                    <ol class=\\\"tips-list clearfix\\\"></ol>\\n                </div>\\n            </div>\\n                                                <div id=\\\"summary-tips\\\" class=\\\"summary-tips\\\" clstag=\\\"shangpin|keycount|product|wenxintishi_2\\\" style=\\\"display: none\\\">\\n                <div class=\\\"dt\\\">温馨提示</div>\\n                <div class=\\\"dd\\\">\\n                    <ol class=\\\"tips-list clearfix\\\">\\n                    </ol>\\n                </div>\\n            </div>\\n                                                        </div>\\n            \"}\n";
//        String source = "jd";
//        System.out.println(evaluate(content,source));

    }
}
